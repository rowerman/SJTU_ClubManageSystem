<!--
 * @FileName: 
 * @Description: 
 * @Autor: Liujunjie/Aries-441
 * @StudentNumber: 521021911059
 * @Date: 2023-10-09 23:59:22
 * @E-mail: sjtu.liu.jj@gmail.com/sjtu.1518228705@sjtu.edu.cn
 * @LastEditTime: 2023-10-14 19:23:39
-->
{% load static %}
<div class="container">
    <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="https://www.sjtu.com"><img src="{% static '/images/genshin.png' %}"
                                                                         width="100px" height="30px"></a>
        </div>
        <div>
            <ul class="nav navbar-nav" role="tablist">
                <li><a href="{% url 'home:homepage' %}">HOME</a></li>
                <li><a href="{% url 'club:my_club' %}">我加入的社团</a></li>
                <li><a href="{% url 'club:manage_Myclub' %}">我管理的社团</a></li>
                <li><a href="{% url 'club:list_club' %}">全部社团</a></li>
                <li><a href="{% url 'club:all_activity' %}">最新活动</a></li>
                <li><a href="#">社团闲置物品交易</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right" style="margin-right: 10px">
                {% if user.is_authenticated %}
                <li>
                    <div class="dropdown" style="margin-top: 8px">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu" data-toggle="dropdown">
                            {{ user.username }}<span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'account:my_information' %}">个人信息</a></li>
                            <li><a href="{% url 'account:password_change' %}">修改密码</a></li>
                            <li><a id="reset-password-btn">重置密码</a></li>
                            <li><a href="{% url 'club:send_message' %}">联络他人</a></li>
                            <li><a href="{% url 'club:my_receive' %}">收到的消息</a></li>
                            <li><a href="{% url 'club:my_send' %}">发出的消息</a></li>
                            <li><a href="{% url 'club:create_club' %}">创建社团</a></li>
                            <li><a href="{% url 'account:search' %}">查找用户</a></li>
                        </ul>
                     </div>
                </li>

                <li><a id="logout-btn">Logout</a></li>
                {% else %}
                <li><a href="{% url 'account:user_login' %}">LOGIN</a></li>
                <li><a href="{% url 'account:user_register' %}">Sign up</a></li>
                {% endif %}
            </ul>
        </div>
    </nav>
</div>
<script>
    // 获取重置密码按钮元素
    var resetPasswordBtn = document.getElementById("reset-password-btn");
    // 添加点击事件监听器
    resetPasswordBtn.addEventListener("click", function(event) {
      event.preventDefault(); // 阻止默认的链接行为
      // 弹出确认对话框
      var confirmReset = confirm("确定要重置密码吗？这个行为会使你退出登录");
      // 如果用户点击了确认按钮，则继续执行重置密码操作
      if (confirmReset) {
        // 执行重置密码操作
        window.location.href = "{% url 'account:password_reset' %}"; 
      }
    });

    // 获取退出登录按钮元素
    var logoutBtn = document.getElementById("logout-btn");
    // 添加点击事件监听器
    logoutBtn.addEventListener("click", function(event) {
      event.preventDefault(); // 阻止默认的链接行为
      // 弹出确认对话框
      var confirmReset = confirm("确定要退出当前登录账号吗？");
      // 如果用户点击了确认按钮，则继续执行退出登录操作
      if (confirmReset) {
        // 执行退出登录操作
        window.location.href = "{% url 'account:logout' %}"; 
      }
    });
</script>
<script src="{% static 'js/jquery.js' %}"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
